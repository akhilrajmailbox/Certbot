<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!-->
<html class=" js flexbox canvas canvastext webgl no-touch geolocation postmessage no-websqldatabase indexeddb hashchange history draganddrop websockets rgba no-hsla multiplebgs backgroundsize borderimage borderradius boxshadow textshadow opacity cssanimations csscolumns cssgradients no-cssreflections csstransforms csstransforms3d csstransitions fontface generatedcontent video audio localstorage sessionstorage webworkers applicationcache svg inlinesvg smil svgclippaths" style="" lang="en"><!--<![endif]--><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>User Guide — Certbot 0.15.0.dev0 documentation</title>
  
<!--

 ██████╗███████╗██████╗ ████████╗██████╗  ██████╗ ████████╗
██╔════╝██╔════╝██╔══██╗╚══██╔══╝██╔══██╗██╔═══██╗╚══██╔══╝
██║     █████╗  ██████╔╝   ██║   ██████╔╝██║   ██║   ██║
██║     ██╔══╝  ██╔══██╗   ██║   ██╔══██╗██║   ██║   ██║
╚██████╗███████╗██║  ██║   ██║   ██████╔╝╚██████╔╝   ██║
 ╚═════╝╚══════╝╚═╝  ╚═╝   ╚═╝   ╚═════╝  ╚═════╝    ╚═╝

Like looking at code? Help us! https://github.com/certbot/certbot
-->

  
  

  <meta name="description" content="Automatically enable HTTPS on your website with EFF's Certbot, deploying Let's Encrypt certificates.">
<meta property="og:image" content="https://certbot.eff.org/images/certbot-OG.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@EFF">
<meta name="twitter:title" content="User Guide — Certbot 0.15.0.dev0 documentation">
<meta name="twitter:description" content="Automatically enable HTTPS on your website with EFF's Certbot, deploying Let's Encrypt certificates.">
<meta name="twitter:image" content="https://certbot.eff.org/images/certbot-OG.png">
<meta name="twitter:image:alt" content="Certbot: An automatic client for enabling HTTPS on your website.">

  

  
  
    

  

  
  
    <link rel="stylesheet" href="2.userguide_files/theme.css" type="text/css">
  

  

  
        <link rel="index" title="Index" href="https://certbot.eff.org/docs/genindex.html">
        <link rel="search" title="Search" href="https://certbot.eff.org/docs/search.html">
    <link rel="top" title="Certbot 0.15.0.dev0 documentation" href="https://certbot.eff.org/docs/index.html">
        <link rel="next" title="Developer Guide" href="https://certbot.eff.org/docs/contributing.html">
        <link rel="prev" title="Get Certbot" href="https://certbot.eff.org/docs/install.html"> 

  
  <script src="2.userguide_files/modernizr.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <nav class="main-nav fixed">
  <ul>
    <li><a href="https://certbot.eff.org/"><img src="2.userguide_files/EFF-logo-plain.svg" alt="Electronic Frontier Foundation"></a></li>
    <li><a href="https://certbot.eff.org/">Home</a></li>
    <li><a href="https://certbot.eff.org/about/">About Certbot</a></li>
    <li><a href="https://certbot.eff.org/faq/">FAQ</a></li>
    <li><a href="https://certbot.eff.org/docs/">Documentation</a></li>
    <li><a href="https://certbot.eff.org/support/">Support</a></li>
    <li><a target="_blank" rel="noreferrer" href="https://github.com/certbot/certbot">Source Code</a></li>
    <li class="donate"><a target="_blank" href="https://supporters.eff.org/donate/support-work-on-certbot">donate to EFF</a></li>
    <li id="hamburger">≡</li>
  </ul>
</nav>

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="https://certbot.eff.org/" class="icon icon-home"> Certbot
          

          
          </a>

          
            
            
              <div class="version">
                0.15
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input name="q" placeholder="Search docs" type="text">
    <input name="check_keywords" value="yes" type="hidden">
    <input name="area" value="default" type="hidden">
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="https://certbot.eff.org/docs/intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="https://certbot.eff.org/docs/install.html">Get Certbot</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#"><span class="toctree-expand"></span>User Guide</a><ul>
<li class="toctree-l2 current"><a class="reference internal" href="#certbot-commands">Certbot Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="#getting-certificates-and-choosing-plugins"><span class="toctree-expand"></span>Getting certificates (and choosing plugins)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#apache">Apache</a></li>
<li class="toctree-l3"><a class="reference internal" href="#webroot">Webroot</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nginx">Nginx</a></li>
<li class="toctree-l3"><a class="reference internal" href="#standalone">Standalone</a></li>
<li class="toctree-l3"><a class="reference internal" href="#manual">Manual</a></li>
<li class="toctree-l3"><a class="reference internal" href="#third-party-plugins">Third-party plugins</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#managing-certificates"><span class="toctree-expand"></span>Managing certificates</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#re-creating-and-updating-existing-certificates">Re-creating and Updating Existing Certificates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#changing-a-certificate-s-domains">Changing a Certificate’s Domains</a></li>
<li class="toctree-l3"><a class="reference internal" href="#revoking-certificates">Revoking certificates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#renewing-certificates">Renewing certificates</a></li>
<li class="toctree-l3"><a class="reference internal" href="#modifying-the-renewal-configuration-file">Modifying the Renewal Configuration File</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#where-are-my-certificates">Where are my certificates?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pre-and-post-validation-hooks">Pre and Post Validation Hooks</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuration-file">Configuration file</a></li>
<li class="toctree-l2"><a class="reference internal" href="#certbot-command-line-options">Certbot command-line options</a></li>
<li class="toctree-l2"><a class="reference internal" href="#getting-help">Getting help</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="https://certbot.eff.org/docs/contributing.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="https://certbot.eff.org/docs/packaging.html">Packaging Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="https://certbot.eff.org/docs/resources.html">Resources</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="https://certbot.eff.org/docs/api.html">API Documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="https://certbot.eff.org/">Certbot</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 









<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="https://certbot.eff.org/docs/index.html">Docs</a> »</li>
      
    <li>User Guide</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/certbot/certbot/blob/master/docs/using.rst" class="fa fa-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="user-guide">
<h1>User Guide<a class="headerlink" href="#user-guide" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#certbot-commands" id="id4">Certbot Commands</a></li>
<li><a class="reference internal" href="#getting-certificates-and-choosing-plugins" id="id5">Getting certificates (and choosing plugins)</a><ul>
<li><a class="reference internal" href="#apache" id="id6">Apache</a></li>
<li><a class="reference internal" href="#webroot" id="id7">Webroot</a></li>
<li><a class="reference internal" href="#nginx" id="id8">Nginx</a></li>
<li><a class="reference internal" href="#standalone" id="id9">Standalone</a></li>
<li><a class="reference internal" href="#manual" id="id10">Manual</a></li>
<li><a class="reference internal" href="#third-party-plugins" id="id11">Third-party plugins</a></li>
</ul>
</li>
<li><a class="reference internal" href="#managing-certificates" id="id12">Managing certificates</a><ul>
<li><a class="reference internal" href="#re-creating-and-updating-existing-certificates" id="id13">Re-creating and Updating Existing Certificates</a></li>
<li><a class="reference internal" href="#changing-a-certificate-s-domains" id="id14">Changing a Certificate’s Domains</a></li>
<li><a class="reference internal" href="#revoking-certificates" id="id15">Revoking certificates</a></li>
<li><a class="reference internal" href="#renewing-certificates" id="id16">Renewing certificates</a></li>
<li><a class="reference internal" href="#modifying-the-renewal-configuration-file" id="id17">Modifying the Renewal Configuration File</a></li>
</ul>
</li>
<li><a class="reference internal" href="#where-are-my-certificates" id="id18">Where are my certificates?</a></li>
<li><a class="reference internal" href="#pre-and-post-validation-hooks" id="id19">Pre and Post Validation Hooks</a></li>
<li><a class="reference internal" href="#configuration-file" id="id20">Configuration file</a></li>
<li><a class="reference internal" href="#certbot-command-line-options" id="id21">Certbot command-line options</a></li>
<li><a class="reference internal" href="#getting-help" id="id22">Getting help</a></li>
</ul>
</div>
<div class="section" id="certbot-commands">
<h2><a class="toc-backref" href="#id4">Certbot Commands</a><a class="headerlink" href="#certbot-commands" title="Permalink to this headline">¶</a></h2>
<p>Certbot uses a number of different commands (also referred
to as “subcommands”) to request specific actions such as
obtaining, renewing, or revoking certificates. The most important
and commonly-used commands will be discussed throughout this
document; an exhaustive list also appears near the end of the document.</p>
<p>The <code class="docutils literal"><span class="pre">certbot</span></code> script on your web server might be named <code class="docutils literal"><span class="pre">letsencrypt</span></code> if your system uses an older package, or <code class="docutils literal"><span class="pre">certbot-auto</span></code> if you used an alternate installation method. Throughout the docs, whenever you see <code class="docutils literal"><span class="pre">certbot</span></code>, swap in the correct name as needed.</p>
</div>
<div class="section" id="getting-certificates-and-choosing-plugins">
<span id="plugins"></span><h2><a class="toc-backref" href="#id5">Getting certificates (and choosing plugins)</a><a class="headerlink" href="#getting-certificates-and-choosing-plugins" title="Permalink to this headline">¶</a></h2>
<p>The Certbot client supports two types of plugins for
obtaining and installing certificates: authenticators and installers.</p>
<p>Authenticators are plugins used with the <code class="docutils literal"><span class="pre">certonly</span></code> command to obtain a cert.
The authenticator validates that you
control the domain(s) you are requesting a cert for, obtains a cert for the specified
domain(s), and places the cert in the <code class="docutils literal"><span class="pre">/etc/letsencrypt</span></code> directory on your
machine. The authenticator does not install the cert (it does not edit any of your server’s configuration files to serve the
obtained certificate). If you specify multiple domains to authenticate, they will
all be listed in a single certificate. To obtain multiple separate certificates
you will need to run Certbot multiple times.</p>
<p>Installers are Plugins used with the <code class="docutils literal"><span class="pre">install</span></code> command to install a cert.
These plugins can modify your webserver’s configuration to
serve your website over HTTPS using certificates obtained by certbot.</p>
<p>Plugins that do both can be used with the <code class="docutils literal"><span class="pre">certbot</span> <span class="pre">run</span></code> command, which is the default
when no command is specified. The <code class="docutils literal"><span class="pre">run</span></code> subcommand can also be used to specify
a combination of distinct authenticator and installer plugins.</p>
<div class="wy-table-responsive"><table class="docutils" border="1">
<colgroup>
<col width="10%">
<col width="4%">
<col width="4%">
<col width="57%">
<col width="26%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Plugin</th>
<th class="head">Auth</th>
<th class="head">Inst</th>
<th class="head">Notes</th>
<th class="head">Challenge types (and port)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="#apache">apache</a></td>
<td>Y</td>
<td>Y</td>
<td><div class="first last line-block">
<div class="line">Automates obtaining and installing a cert with Apache 2.4 on</div>
<div class="line">Debian-based distributions with <code class="docutils literal"><span class="pre">libaugeas0</span></code> 1.0+.</div>
</div>
</td>
<td><a class="reference external" href="https://tools.ietf.org/html/draft-ietf-acme-acme-03#section-7.3">tls-sni-01</a> (443)</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#webroot">webroot</a></td>
<td>Y</td>
<td>N</td>
<td><div class="first last line-block">
<div class="line">Obtains a cert by writing to the webroot directory of an</div>
<div class="line">already running webserver.</div>
</div>
</td>
<td><a class="reference external" href="https://tools.ietf.org/html/draft-ietf-acme-acme-03#section-7.2">http-01</a> (80)</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#nginx">nginx</a></td>
<td>Y</td>
<td>Y</td>
<td><div class="first last line-block">
<div class="line">Automates obtaining and installing a cert with Nginx. Alpha</div>
<div class="line">release shipped with Certbot 0.9.0.</div>
</div>
</td>
<td><a class="reference external" href="https://tools.ietf.org/html/draft-ietf-acme-acme-03#section-7.3">tls-sni-01</a> (443)</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#standalone">standalone</a></td>
<td>Y</td>
<td>N</td>
<td><div class="first last line-block">
<div class="line">Uses a “standalone” webserver to obtain a cert. Requires</div>
<div class="line">port 80 or 443 to be available. This is useful on systems</div>
<div class="line">with no webserver, or when direct integration with the local</div>
<div class="line">webserver is not supported or not desired.</div>
</div>
</td>
<td><a class="reference external" href="https://tools.ietf.org/html/draft-ietf-acme-acme-03#section-7.2">http-01</a> (80) or
<a class="reference external" href="https://tools.ietf.org/html/draft-ietf-acme-acme-03#section-7.3">tls-sni-01</a> (443)</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#manual">manual</a></td>
<td>Y</td>
<td>N</td>
<td><div class="first last line-block">
<div class="line">Helps you obtain a cert by giving you instructions to perform</div>
<div class="line">domain validation yourself. Additionally allows you to</div>
<div class="line">specify scripts to automate the validation task in a</div>
<div class="line">customized way.</div>
</div>
</td>
<td><a class="reference external" href="https://tools.ietf.org/html/draft-ietf-acme-acme-03#section-7.2">http-01</a> (80) or
<a class="reference external" href="https://tools.ietf.org/html/draft-ietf-acme-acme-03#section-7.4">dns-01</a> (53)</td>
</tr>
</tbody>
</table></div>
<p>Under the hood, plugins use one of several ACME protocol <a class="reference external" href="https://tools.ietf.org/html/draft-ietf-acme-acme-03#section-7">challenges</a> to
prove you control a domain.  The options are <a class="reference external" href="https://tools.ietf.org/html/draft-ietf-acme-acme-03#section-7.2">http-01</a> (which uses port 80),
<a class="reference external" href="https://tools.ietf.org/html/draft-ietf-acme-acme-03#section-7.3">tls-sni-01</a> (port 443) and <a class="reference external" href="https://tools.ietf.org/html/draft-ietf-acme-acme-03#section-7.4">dns-01</a> (requiring configuration of a DNS server on
port 53, though that’s often not the same machine as your webserver). A few
plugins support more than one challenge type, in which case you can choose one
with <code class="docutils literal"><span class="pre">--preferred-challenges</span></code>.</p>
<p>There are also many <a class="reference internal" href="#third-party-plugins">third-party-plugins</a> available. Below we describe in more detail
the circumstances in which each plugin can be used, and how to use it.</p>
<div class="section" id="apache">
<h3><a class="toc-backref" href="#id6">Apache</a><a class="headerlink" href="#apache" title="Permalink to this headline">¶</a></h3>
<p>The Apache plugin currently requires an OS with augeas version 1.0; currently <a class="reference external" href="https://github.com/certbot/certbot/blob/master/certbot-apache/certbot_apache/constants.py">it
supports</a>
modern OSes based on Debian, Fedora, SUSE, Gentoo and Darwin.
This automates both obtaining <em>and</em> installing certs on an Apache
webserver. To specify this plugin on the command line, simply include
<code class="docutils literal"><span class="pre">--apache</span></code>.</p>
</div>
<div class="section" id="webroot">
<h3><a class="toc-backref" href="#id7">Webroot</a><a class="headerlink" href="#webroot" title="Permalink to this headline">¶</a></h3>
<p>If you’re running a local webserver for which you have the ability
to modify the content being served, and you’d prefer not to stop the
webserver during the certificate issuance process, you can use the webroot
plugin to obtain a cert by including <code class="docutils literal"><span class="pre">certonly</span></code> and <code class="docutils literal"><span class="pre">--webroot</span></code> on
the command line. In addition, you’ll need to specify <code class="docutils literal"><span class="pre">--webroot-path</span></code>
or <code class="docutils literal"><span class="pre">-w</span></code> with the top-level directory (“web root”) containing the files
served by your webserver. For example, <code class="docutils literal"><span class="pre">--webroot-path</span> <span class="pre">/var/www/html</span></code>
or <code class="docutils literal"><span class="pre">--webroot-path</span> <span class="pre">/usr/share/nginx/html</span></code> are two common webroot paths.</p>
<p>If you’re getting a certificate for many domains at once, the plugin
needs to know where each domain’s files are served from, which could
potentially be a separate directory for each domain. When requesting a
certificate for multiple domains, each domain will use the most recently
specified <code class="docutils literal"><span class="pre">--webroot-path</span></code>.  So, for instance,</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">certbot</span> <span class="n">certonly</span> <span class="o">--</span><span class="n">webroot</span> <span class="o">-</span><span class="n">w</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">example</span><span class="o">/</span> <span class="o">-</span><span class="n">d</span> <span class="n">www</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span> <span class="o">-</span><span class="n">d</span> <span class="n">example</span><span class="o">.</span><span class="n">com</span> <span class="o">-</span><span class="n">w</span> <span class="o">/</span><span class="n">var</span><span class="o">/</span><span class="n">www</span><span class="o">/</span><span class="n">other</span> <span class="o">-</span><span class="n">d</span> <span class="n">other</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">net</span> <span class="o">-</span><span class="n">d</span> <span class="n">another</span><span class="o">.</span><span class="n">other</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">net</span>
</pre></div>
</div>
<p>would obtain a single certificate for all of those names, using the
<code class="docutils literal"><span class="pre">/var/www/example</span></code> webroot directory for the first two, and
<code class="docutils literal"><span class="pre">/var/www/other</span></code> for the second two.</p>
<p>The webroot plugin works by creating a temporary file for each of your requested
domains in <code class="docutils literal"><span class="pre">${webroot-path}/.well-known/acme-challenge</span></code>. Then the Let’s Encrypt
validation server makes HTTP requests to validate that the DNS for each
requested domain resolves to the server running certbot. An example request
made to your web server would look like:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="mf">66.133</span><span class="o">.</span><span class="mf">109.36</span> <span class="o">-</span> <span class="o">-</span> <span class="p">[</span><span class="mi">05</span><span class="o">/</span><span class="n">Jan</span><span class="o">/</span><span class="mi">2016</span><span class="p">:</span><span class="mi">20</span><span class="p">:</span><span class="mi">11</span><span class="p">:</span><span class="mi">24</span> <span class="o">-</span><span class="mi">0500</span><span class="p">]</span> <span class="s2">"GET /.well-known/acme-challenge/HGr8U1IeTW4kY_Z6UIyaakzOkyQgPr_7ArlLgtZE8SX HTTP/1.1"</span> <span class="mi">200</span> <span class="mi">87</span> <span class="s2">"-"</span> <span class="s2">"Mozilla/5.0 (compatible; Let's Encrypt validation server; +https://www.letsencrypt.org)"</span>
</pre></div>
</div>
<p>Note that to use the webroot plugin, your server must be configured to serve
files from hidden directories. If <code class="docutils literal"><span class="pre">/.well-known</span></code> is treated specially by
your webserver configuration, you might need to modify the configuration
to ensure that files inside <code class="docutils literal"><span class="pre">/.well-known/acme-challenge</span></code> are served by
the webserver.</p>
</div>
<div class="section" id="nginx">
<h3><a class="toc-backref" href="#id8">Nginx</a><a class="headerlink" href="#nginx" title="Permalink to this headline">¶</a></h3>
<p>The Nginx plugin has been distributed with Certbot since version 0.9.0 and should
work for most configurations. Because it is alpha code, we recommend backing up Nginx
configurations before using it (though you can also revert changes to
configurations with <code class="docutils literal"><span class="pre">certbot</span> <span class="pre">--nginx</span> <span class="pre">rollback</span></code>). You can use it by providing
the <code class="docutils literal"><span class="pre">--nginx</span></code> flag on the commandline.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">certbot</span> <span class="o">--</span><span class="n">nginx</span>
</pre></div>
</div>
</div>
<div class="section" id="standalone">
<h3><a class="toc-backref" href="#id9">Standalone</a><a class="headerlink" href="#standalone" title="Permalink to this headline">¶</a></h3>
<p>Use standalone mode to obtain a cert if you don’t want to use (or don’t currently have)
existing server software. The standalone plugin does not rely on any other server
software running on the machine where you obtain the cert.</p>
<p>To obtain a cert using a “standalone” webserver, you can use the
standalone plugin by including <code class="docutils literal"><span class="pre">certonly</span></code> and <code class="docutils literal"><span class="pre">--standalone</span></code>
on the command line. This plugin needs to bind to port 80 or 443 in
order to perform domain validation, so you may need to stop your
existing webserver. To control which port the plugin uses, include
one of the options shown below on the command line.</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">--preferred-challenges</span> <span class="pre">http</span></code> to use port 80</li>
<li><code class="docutils literal"><span class="pre">--preferred-challenges</span> <span class="pre">tls-sni</span></code> to use port 443</li>
</ul>
</div></blockquote>
<p>It must still be possible for your machine to accept inbound connections from
the Internet on the specified port using each requested domain name.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <code class="docutils literal"><span class="pre">--standalone-supported-challenges</span></code> option has been
deprecated since <code class="docutils literal"><span class="pre">certbot</span></code> version 0.9.0.</p>
</div>
</div>
<div class="section" id="manual">
<h3><a class="toc-backref" href="#id10">Manual</a><a class="headerlink" href="#manual" title="Permalink to this headline">¶</a></h3>
<p>If you’d like to obtain a cert running <code class="docutils literal"><span class="pre">certbot</span></code> on a machine
other than your target webserver or perform the steps for domain
validation yourself, you can use the manual plugin. While hidden from
the UI, you can use the plugin to obtain a cert by specifying
<code class="docutils literal"><span class="pre">certonly</span></code> and <code class="docutils literal"><span class="pre">--manual</span></code> on the command line. This requires you
to copy and paste commands into another terminal session, which may
be on a different computer.</p>
<p>The manual plugin can use either the <code class="docutils literal"><span class="pre">http</span></code> or the <code class="docutils literal"><span class="pre">dns</span></code> challenge. You
can use the <code class="docutils literal"><span class="pre">--preferred-challenges</span></code> option to choose the challenge of your
preference.
The <code class="docutils literal"><span class="pre">http</span></code> challenge will ask you to place a file with a specific name and
specific content in the <code class="docutils literal"><span class="pre">/.well-known/acme-challenge/</span></code> directory directly
in the top-level directory (“web root”) containing the files served by your
webserver. In essence it’s the same as the <a class="reference internal" href="#webroot">webroot</a> plugin, but not automated.
When using the <code class="docutils literal"><span class="pre">dns</span></code> challenge, <code class="docutils literal"><span class="pre">certbot</span></code> will ask you to place a TXT DNS
record with specific contents under the domain name consisting of the hostname
for which you want a certificate issued, prepended by <code class="docutils literal"><span class="pre">_acme-challenge</span></code>.</p>
<p>For example, for the domain <code class="docutils literal"><span class="pre">example.com</span></code>, a zone file entry would look like:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">_acme</span><span class="o">-</span><span class="n">challenge</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">.</span> <span class="mi">300</span> <span class="n">IN</span> <span class="n">TXT</span> <span class="s2">"gfj9Xq...Rg85nM"</span>
</pre></div>
</div>
<p>Additionally you can specify scripts to prepare for validation and perform the
authentication procedure  and/or clean up after it by using the
<code class="docutils literal"><span class="pre">--manual-auth-hook</span></code> and <code class="docutils literal"><span class="pre">--manual-cleanup-hook</span></code> flags. This is described in
more depth in the <a class="reference internal" href="#hooks">hooks</a> section.</p>
</div>
<div class="section" id="third-party-plugins">
<span id="id1"></span><h3><a class="toc-backref" href="#id11">Third-party plugins</a><a class="headerlink" href="#third-party-plugins" title="Permalink to this headline">¶</a></h3>
<p>There are also a number of third-party plugins for the client, provided by
other developers. Many are beta/experimental, but some are already in
widespread use:</p>
<div class="wy-table-responsive"><table class="docutils" border="1">
<colgroup>
<col width="13%">
<col width="5%">
<col width="5%">
<col width="77%">
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Plugin</th>
<th class="head">Auth</th>
<th class="head">Inst</th>
<th class="head">Notes</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference external" href="https://github.com/plesk/letsencrypt-plesk">plesk</a></td>
<td>Y</td>
<td>Y</td>
<td>Integration with the Plesk web hosting tool</td>
</tr>
<tr class="row-odd"><td><a class="reference external" href="https://github.com/greenhost/certbot-haproxy">haproxy</a></td>
<td>Y</td>
<td>Y</td>
<td>Integration with the HAProxy load balancer</td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/dlapiduz/letsencrypt-s3front">s3front</a></td>
<td>Y</td>
<td>Y</td>
<td>Integration with Amazon CloudFront distribution of S3 buckets</td>
</tr>
<tr class="row-odd"><td><a class="reference external" href="https://github.com/Gandi/letsencrypt-gandi">gandi</a></td>
<td>Y</td>
<td>Y</td>
<td>Integration with Gandi’s hosting products and API</td>
</tr>
<tr class="row-even"><td><a class="reference external" href="http://git.sesse.net/?p=letsencrypt-varnish-plugin">varnish</a></td>
<td>Y</td>
<td>N</td>
<td>Obtain certs via a Varnish server</td>
</tr>
<tr class="row-odd"><td><a class="reference external" href="https://github.com/marcan/letsencrypt-external">external</a></td>
<td>Y</td>
<td>N</td>
<td>A plugin for convenient scripting (See also ticket <a class="reference external" href="https://github.com/certbot/certbot/issues/2782">2782</a>)</td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/e00E/lets-encrypt-icecast">icecast</a></td>
<td>N</td>
<td>Y</td>
<td>Deploy certs to Icecast 2 streaming media servers</td>
</tr>
<tr class="row-odd"><td><a class="reference external" href="https://github.com/kharkevich/letsencrypt-pritunl">pritunl</a></td>
<td>N</td>
<td>Y</td>
<td>Install certs in pritunl distributed OpenVPN servers</td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/kharkevich/letsencrypt-proxmox">proxmox</a></td>
<td>N</td>
<td>Y</td>
<td>Install certs in Proxmox Virtualization servers</td>
</tr>
<tr class="row-odd"><td><a class="reference external" href="https://github.com/EFForg/starttls-everywhere">postfix</a></td>
<td>N</td>
<td>Y</td>
<td>STARTTLS Everywhere is becoming a Certbot Postfix/Exim plugin</td>
</tr>
<tr class="row-even"><td><a class="reference external" href="https://github.com/gboudreau/certbot-heroku">heroku</a></td>
<td>Y</td>
<td>Y</td>
<td>Integration with Heroku SSL</td>
</tr>
</tbody>
</table></div>
<p>If you’re interested, you can also <a class="reference internal" href="https://certbot.eff.org/docs/contributing.html#dev-plugin"><span class="std std-ref">write your own plugin</span></a>.</p>
</div>
</div>
<div class="section" id="managing-certificates">
<span id="managing-certs"></span><h2><a class="toc-backref" href="#id12">Managing certificates</a><a class="headerlink" href="#managing-certificates" title="Permalink to this headline">¶</a></h2>
<p>To view a list of the certificates Certbot knows about, run
the <code class="docutils literal"><span class="pre">certificates</span></code> subcommand:</p>
<p><code class="docutils literal"><span class="pre">certbot</span> <span class="pre">certificates</span></code></p>
<p>This returns information in the following format:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Found</span> <span class="n">the</span> <span class="n">following</span> <span class="n">certs</span><span class="p">:</span>
  <span class="n">Certificate</span> <span class="n">Name</span><span class="p">:</span> <span class="n">example</span><span class="o">.</span><span class="n">com</span>
    <span class="n">Domains</span><span class="p">:</span> <span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="p">,</span> <span class="n">www</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span>
    <span class="n">Expiry</span> <span class="n">Date</span><span class="p">:</span> <span class="mi">2017</span><span class="o">-</span><span class="mi">02</span><span class="o">-</span><span class="mi">19</span> <span class="mi">19</span><span class="p">:</span><span class="mi">53</span><span class="p">:</span><span class="mi">00</span><span class="o">+</span><span class="mi">00</span><span class="p">:</span><span class="mi">00</span> <span class="p">(</span><span class="n">VALID</span><span class="p">:</span> <span class="mi">30</span> <span class="n">days</span><span class="p">)</span>
    <span class="n">Certificate</span> <span class="n">Path</span><span class="p">:</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">letsencrypt</span><span class="o">/</span><span class="n">live</span><span class="o">/</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">fullchain</span><span class="o">.</span><span class="n">pem</span>
    <span class="n">Private</span> <span class="n">Key</span> <span class="n">Path</span><span class="p">:</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">letsencrypt</span><span class="o">/</span><span class="n">live</span><span class="o">/</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">privkey</span><span class="o">.</span><span class="n">pem</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">Certificate</span> <span class="pre">Name</span></code> shows the name of the certificate. Pass this name
using the <code class="docutils literal"><span class="pre">--cert-name</span></code> flag to specify a particular certificate for the <code class="docutils literal"><span class="pre">run</span></code>,
<code class="docutils literal"><span class="pre">certonly</span></code>, <code class="docutils literal"><span class="pre">certificates</span></code>, <code class="docutils literal"><span class="pre">renew</span></code>, and <code class="docutils literal"><span class="pre">delete</span></code> commands. Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">certbot</span> <span class="n">certonly</span> <span class="o">--</span><span class="n">cert</span><span class="o">-</span><span class="n">name</span> <span class="n">example</span><span class="o">.</span><span class="n">com</span>
</pre></div>
</div>
<div class="section" id="re-creating-and-updating-existing-certificates">
<h3><a class="toc-backref" href="#id13">Re-creating and Updating Existing Certificates</a><a class="headerlink" href="#re-creating-and-updating-existing-certificates" title="Permalink to this headline">¶</a></h3>
<p>You can use <code class="docutils literal"><span class="pre">certonly</span></code> or <code class="docutils literal"><span class="pre">run</span></code> subcommands to request
the creation of a single new certificate even if you already have an
existing certificate with some of the same domain names.</p>
<p>If a certificate is requested with <code class="docutils literal"><span class="pre">run</span></code> or <code class="docutils literal"><span class="pre">certonly</span></code> specifying a
certificate name that already exists, Certbot updates
the existing certificate. Otherwise a new certificate
is created and assigned the specified name.</p>
<p>The <code class="docutils literal"><span class="pre">--force-renewal</span></code>, <code class="docutils literal"><span class="pre">--duplicate</span></code>, and <code class="docutils literal"><span class="pre">--expand</span></code> options
control Certbot’s behavior when re-creating
a certificate with the same name as an existing certificate.
If you don’t specify a requested behavior, Certbot may ask you what you intended.</p>
<p><code class="docutils literal"><span class="pre">--force-renewal</span></code> tells Certbot to request a new certificate
with the same domains as an existing certificate. Each domain
must be explicitly specified via <code class="docutils literal"><span class="pre">-d</span></code>. If successful, this certificate
is saved alongside the earlier one and symbolic links (the “<code class="docutils literal"><span class="pre">live</span></code>”
reference) will be updated to point to the new certificate. This is a
valid method of renewing a specific individual
certificate.</p>
<p><code class="docutils literal"><span class="pre">--duplicate</span></code> tells Certbot to create a separate, unrelated certificate
with the same domains as an existing certificate. This certificate is
saved completely separately from the prior one. Most users will not
need to issue this command in normal circumstances.</p>
<p><code class="docutils literal"><span class="pre">--expand</span></code> tells Certbot to update an existing certificate with a new
certificate that contains all of the old domains and one or more additional
new domains.</p>
<p><code class="docutils literal"><span class="pre">--allow-subset-of-names</span></code> tells Certbot to continue with certificate generation if
only some of the specified domain authorizations can be obtained. This may
be useful if some domains specified in a certificate no longer point at this
system.</p>
<p>Whenever you obtain a new certificate in any of these ways, the new
certificate exists alongside any previously obtained certificates, whether
or not the previous certificates have expired. The generation of a new
certificate counts against several rate limits that are intended to prevent
abuse of the ACME protocol, as described
<a class="reference external" href="https://community.letsencrypt.org/t/rate-limits-for-lets-encrypt/6769">here</a>.</p>
</div>
<div class="section" id="changing-a-certificate-s-domains">
<h3><a class="toc-backref" href="#id14">Changing a Certificate’s Domains</a><a class="headerlink" href="#changing-a-certificate-s-domains" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal"><span class="pre">--cert-name</span></code> flag can also be used to modify the domains a certificate contains,
by specifying new domains using the <code class="docutils literal"><span class="pre">-d</span></code> or <code class="docutils literal"><span class="pre">--domains</span></code> flag. If certificate <code class="docutils literal"><span class="pre">example.com</span></code>
previously contained <code class="docutils literal"><span class="pre">example.com</span></code> and <code class="docutils literal"><span class="pre">www.example.com</span></code>, it can be modified to only
contain <code class="docutils literal"><span class="pre">example.com</span></code> by specifying only <code class="docutils literal"><span class="pre">example.com</span></code> with the <code class="docutils literal"><span class="pre">-d</span></code> or <code class="docutils literal"><span class="pre">--domains</span></code> flag. Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">certbot</span> <span class="n">certonly</span> <span class="o">--</span><span class="n">cert</span><span class="o">-</span><span class="n">name</span> <span class="n">example</span><span class="o">.</span><span class="n">com</span> <span class="o">-</span><span class="n">d</span> <span class="n">example</span><span class="o">.</span><span class="n">com</span>
</pre></div>
</div>
<p>The same format can be used to expand the set of domains a certificate contains, or to
replace that set entirely:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">certbot</span> <span class="n">certonly</span> <span class="o">--</span><span class="n">cert</span><span class="o">-</span><span class="n">name</span> <span class="n">example</span><span class="o">.</span><span class="n">com</span> <span class="o">-</span><span class="n">d</span> <span class="n">example</span><span class="o">.</span><span class="n">org</span><span class="p">,</span><span class="n">www</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">org</span>
</pre></div>
</div>
</div>
<div class="section" id="revoking-certificates">
<h3><a class="toc-backref" href="#id15">Revoking certificates</a><a class="headerlink" href="#revoking-certificates" title="Permalink to this headline">¶</a></h3>
<p>If your account key has been compromised or you otherwise need to revoke a certificate,
use the <code class="docutils literal"><span class="pre">revoke</span></code> command to do so. Note that the <code class="docutils literal"><span class="pre">revoke</span></code> command takes the certificate path
(ending in <code class="docutils literal"><span class="pre">cert.pem</span></code>), not a certificate name or domain. Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">certbot</span> <span class="n">revoke</span> <span class="o">--</span><span class="n">cert</span><span class="o">-</span><span class="n">path</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">letsencrypt</span><span class="o">/</span><span class="n">live</span><span class="o">/</span><span class="n">CERTNAME</span><span class="o">/</span><span class="n">cert</span><span class="o">.</span><span class="n">pem</span>
</pre></div>
</div>
<p>Additionally, if a certificate
is a test cert obtained via the <code class="docutils literal"><span class="pre">--staging</span></code> or <code class="docutils literal"><span class="pre">--test-cert</span></code> flag, that flag must be passed to the
<code class="docutils literal"><span class="pre">revoke</span></code> subcommand.
Once a certificate is revoked (or for other cert management tasks), all of a certificate’s
relevant files can be removed from the system with the <code class="docutils literal"><span class="pre">delete</span></code> subcommand:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">certbot</span> <span class="n">delete</span> <span class="o">--</span><span class="n">cert</span><span class="o">-</span><span class="n">name</span> <span class="n">example</span><span class="o">.</span><span class="n">com</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you don’t use <code class="docutils literal"><span class="pre">delete</span></code> to remove the certificate completely, it will be renewed automatically at the next renewal event.</p>
</div>
</div>
<div class="section" id="renewing-certificates">
<span id="renewal"></span><h3><a class="toc-backref" href="#id16">Renewing certificates</a><a class="headerlink" href="#renewing-certificates" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Let’s Encrypt CA issues short-lived certificates (90
days). Make sure you renew the certificates at least once in 3
months.</p>
</div>
<p>As of version 0.10.0, Certbot supports a <code class="docutils literal"><span class="pre">renew</span></code> action to check
all installed certificates for impending expiry and attempt to renew
them. The simplest form is simply</p>
<p><code class="docutils literal"><span class="pre">certbot</span> <span class="pre">renew</span></code></p>
<p>This command attempts to renew any previously-obtained certificates that
expire in less than 30 days. The same plugin and options that were used
at the time the certificate was originally issued will be used for the
renewal attempt, unless you specify other plugins or options. Unlike <code class="docutils literal"><span class="pre">certonly</span></code>, <code class="docutils literal"><span class="pre">renew</span></code> acts on
multiple certificates and always takes into account whether each one is near
expiry. Because of this, <code class="docutils literal"><span class="pre">renew</span></code> is suitable (and designed) for automated use,
to allow your system to automatically renew each certificate when appropriate.
Since <code class="docutils literal"><span class="pre">renew</span></code> only renews certificates that are near expiry it can be
run as frequently as you want - since it will usually take no action.</p>
<p>The <code class="docutils literal"><span class="pre">renew</span></code> command includes hooks for running commands or scripts before or after a certificate is
renewed. For example, if you have a single cert obtained using
the <a class="reference internal" href="#standalone">standalone</a> plugin, you might need to stop the webserver
before renewing so standalone can bind to the necessary ports, and
then restart it after the plugin is finished. Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">certbot</span> <span class="n">renew</span> <span class="o">--</span><span class="n">pre</span><span class="o">-</span><span class="n">hook</span> <span class="s2">"service nginx stop"</span> <span class="o">--</span><span class="n">post</span><span class="o">-</span><span class="n">hook</span> <span class="s2">"service nginx start"</span>
</pre></div>
</div>
<p>If a hook exits with a non-zero exit code, the error will be printed
to <code class="docutils literal"><span class="pre">stderr</span></code> but renewal will be attempted anyway. A failing hook
doesn’t directly cause Certbot to exit with a non-zero exit code, but
since Certbot exits with a non-zero exit code when renewals fail, a
failed hook causing renewal failures will indirectly result in a
non-zero exit code. Hooks will only be run if a certificate is due for
renewal, so you can run the above command frequently without
unnecessarily stopping your webserver.</p>
<p><code class="docutils literal"><span class="pre">--pre-hook</span></code> and <code class="docutils literal"><span class="pre">--post-hook</span></code> hooks run before and after every renewal
attempt. If you want your hook to run only after a successful renewal, use
<code class="docutils literal"><span class="pre">--renew-hook</span></code> in a command like this.</p>
<p><code class="docutils literal"><span class="pre">certbot</span> <span class="pre">renew</span> <span class="pre">--renew-hook</span> <span class="pre">/path/to/renew-hook-script</span></code></p>
<p>For example, if you have a daemon that does not read its certificates as the
root user, a renew hook like this can copy them to the correct location and
apply appropriate file permissions.</p>
<p>/path/to/renew-hook-script</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>#!/bin/sh

set -e

for domain in $RENEWED_DOMAINS; do
        case $domain in
        example.com)
                daemon_cert_root=/etc/some-daemon/certs

                # Make sure the certificate and private key files are
                # never world readable, even just for an instant while
                # we're copying them into daemon_cert_root.
                umask 077

                cp "$RENEWED_LINEAGE/fullchain.pem" "$daemon_cert_root/$domain.cert"
                cp "$RENEWED_LINEAGE/privkey.pem" "$daemon_cert_root/$domain.key"

                # Apply the proper file ownership and permissions for
                # the daemon to read its certificate and key.
                chown some-daemon "$daemon_cert_root/$domain.cert" \
                        "$daemon_cert_root/$domain.key"
                chmod 400 "$daemon_cert_root/$domain.cert" \
                        "$daemon_cert_root/$domain.key"

                service some-daemon restart &gt;/dev/null
                ;;
        esac
done
</pre></div>
</div>
<p>More information about renewal hooks can be found by running
<code class="docutils literal"><span class="pre">certbot</span> <span class="pre">--help</span> <span class="pre">renew</span></code>.</p>
<p>If you’re sure that this command executes successfully without human
intervention, you can add the command to <code class="docutils literal"><span class="pre">crontab</span></code> (since certificates
are only renewed when they’re determined to be near expiry, the command
can run on a regular basis, like every week or every day). In that case,
you are likely to want to use the <code class="docutils literal"><span class="pre">-q</span></code> or <code class="docutils literal"><span class="pre">--quiet</span></code> quiet flag to
silence all output except errors.</p>
<p>If you are manually renewing all of your certificates, the
<code class="docutils literal"><span class="pre">--force-renewal</span></code> flag may be helpful; it causes the expiration time of
the certificate(s) to be ignored when considering renewal, and attempts to
renew each and every installed certificate regardless of its age. (This
form is not appropriate to run daily because each certificate will be
renewed every day, which will quickly run into the certificate authority
rate limit.)</p>
<p>Note that options provided to <code class="docutils literal"><span class="pre">certbot</span> <span class="pre">renew</span></code> will apply to
<em>every</em> certificate for which renewal is attempted; for example,
<code class="docutils literal"><span class="pre">certbot</span> <span class="pre">renew</span> <span class="pre">--rsa-key-size</span> <span class="pre">4096</span></code> would try to replace every
near-expiry certificate with an equivalent certificate using a 4096-bit
RSA public key. If a certificate is successfully renewed using
specified options, those options will be saved and used for future
renewals of that certificate.</p>
<p>An alternative form that provides for more fine-grained control over the
renewal process (while renewing specified certificates one at a time),
is <code class="docutils literal"><span class="pre">certbot</span> <span class="pre">certonly</span></code> with the complete set of subject domains of
a specific certificate specified via <code class="xref py py-obj docutils literal"><span class="pre">-d</span></code> flags. You may also want to
include the <code class="docutils literal"><span class="pre">-n</span></code> or <code class="docutils literal"><span class="pre">--noninteractive</span></code> flag to prevent blocking on
user input (which is useful when running the command from cron).</p>
<p><code class="docutils literal"><span class="pre">certbot</span> <span class="pre">certonly</span> <span class="pre">-n</span> <span class="pre">-d</span> <span class="pre">example.com</span> <span class="pre">-d</span> <span class="pre">www.example.com</span></code></p>
<p>All of the domains covered by the certificate must be specified in
this case in order to renew and replace the old certificate rather
than obtaining a new one; don’t forget any <code class="xref py py-obj docutils literal"><span class="pre">www.</span></code> domains! Specifying
a subset of the domains creates a new, separate certificate containing
only those domains, rather than replacing the original certificate.
When run with a set of domains corresponding to an existing certificate,
the <code class="docutils literal"><span class="pre">certonly</span></code> command attempts to renew that specific certificate.</p>
<p>Please note that the CA will send notification emails to the address
you provide if you do not renew certificates that are about to expire.</p>
<p>Certbot is working hard to improve the renewal process, and we
apologize for any inconvenience you encounter in integrating these
commands into your individual environment.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><code class="docutils literal"><span class="pre">certbot</span> <span class="pre">renew</span></code> exit status will only be 1 if a renewal attempt failed.
This means <code class="docutils literal"><span class="pre">certbot</span> <span class="pre">renew</span></code> exit status will be 0 if no cert needs to be updated.
If you write a custom script and expect to run a command only after a cert was actually renewed
you will need to use the <code class="docutils literal"><span class="pre">--post-hook</span></code> since the exit status will be 0 both on successful renewal
and when renewal is not necessary.</p>
</div>
</div>
<div class="section" id="modifying-the-renewal-configuration-file">
<h3><a class="toc-backref" href="#id17">Modifying the Renewal Configuration File</a><a class="headerlink" href="#modifying-the-renewal-configuration-file" title="Permalink to this headline">¶</a></h3>
<p>For advanced certificate management tasks, it is possible to manually modify the certificate’s
renewal configuration file, located at <code class="docutils literal"><span class="pre">/etc/letsencrypt/renewal/CERTNAME</span></code>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Modifying any files in <code class="docutils literal"><span class="pre">/etc/letsencrypt</span></code> can damage them so Certbot can no longer properly manage its certificates, and we do not recommend doing so.</p>
</div>
<p>For most tasks, it is safest to limit yourself to pointing symlinks at the files there, or using
<code class="docutils literal"><span class="pre">--renew-hook</span></code> to copy / make new files based upon those files, if your operational situation requires it
(for instance, combining certs and keys in different way, or having copies of things with different
specific permissions that are demanded by other programs).</p>
<p>If the contents of <code class="docutils literal"><span class="pre">/etc/letsencrypt/archive/CERTNAME</span></code> are moved to a new folder, first specify
the new folder’s name in the renewal configuration file, then run <code class="docutils literal"><span class="pre">certbot</span> <span class="pre">update_symlinks</span></code> to
point the symlinks in <code class="docutils literal"><span class="pre">/etc/letsencrypt/live/CERTNAME</span></code> to the new folder.</p>
<p>If you would like the live certificate files whose symlink location Certbot updates on each run to
reside in a different location, first move them to that location, then specify the full path of
each of the four files in the renewal configuration file. Since the symlinks are relative links,
you must follow this with an invocation of <code class="docutils literal"><span class="pre">certbot</span> <span class="pre">update_symlinks</span></code>.</p>
<p>For example, say that a certificate’s renewal configuration file previously contained the following
directives:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">archive_dir</span> <span class="o">=</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">letsencrypt</span><span class="o">/</span><span class="n">archive</span><span class="o">/</span><span class="n">example</span><span class="o">.</span><span class="n">com</span>
<span class="n">cert</span> <span class="o">=</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">letsencrypt</span><span class="o">/</span><span class="n">live</span><span class="o">/</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">cert</span><span class="o">.</span><span class="n">pem</span>
<span class="n">privkey</span> <span class="o">=</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">letsencrypt</span><span class="o">/</span><span class="n">live</span><span class="o">/</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">privkey</span><span class="o">.</span><span class="n">pem</span>
<span class="n">chain</span> <span class="o">=</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">letsencrypt</span><span class="o">/</span><span class="n">live</span><span class="o">/</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">chain</span><span class="o">.</span><span class="n">pem</span>
<span class="n">fullchain</span> <span class="o">=</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">letsencrypt</span><span class="o">/</span><span class="n">live</span><span class="o">/</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">fullchain</span><span class="o">.</span><span class="n">pem</span>
</pre></div>
</div>
<p>The following commands could be used to specify where these files are located:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">mv</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">letsencrypt</span><span class="o">/</span><span class="n">archive</span><span class="o">/</span><span class="n">example</span><span class="o">.</span><span class="n">com</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">user</span><span class="o">/</span><span class="n">me</span><span class="o">/</span><span class="n">certbot</span><span class="o">/</span><span class="n">example_archive</span>
<span class="n">sed</span> <span class="o">-</span><span class="n">i</span> <span class="s1">'s,/etc/letsencrypt/archive/example.com,/home/user/me/certbot/example_archive,'</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">letsencrypt</span><span class="o">/</span><span class="n">renewal</span><span class="o">/</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">conf</span>
<span class="n">mv</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">letsencrypt</span><span class="o">/</span><span class="n">live</span><span class="o">/</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">/*.</span><span class="n">pem</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">user</span><span class="o">/</span><span class="n">me</span><span class="o">/</span><span class="n">certbot</span><span class="o">/</span>
<span class="n">sed</span> <span class="o">-</span><span class="n">i</span> <span class="s1">'s,/etc/letsencrypt/live/example.com,/home/user/me/certbot,g'</span> <span class="o">/</span><span class="n">etc</span><span class="o">/</span><span class="n">letsencrypt</span><span class="o">/</span><span class="n">renewal</span><span class="o">/</span><span class="n">example</span><span class="o">.</span><span class="n">com</span><span class="o">.</span><span class="n">conf</span>
<span class="n">certbot</span> <span class="n">update_symlinks</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="where-are-my-certificates">
<span id="where-certs"></span><h2><a class="toc-backref" href="#id18">Where are my certificates?</a><a class="headerlink" href="#where-are-my-certificates" title="Permalink to this headline">¶</a></h2>
<p>All generated keys and issued certificates can be found in
<code class="docutils literal"><span class="pre">/etc/letsencrypt/live/$domain</span></code>. Rather than copying, please point
your (web) server configuration directly to those files (or create
symlinks). During the <a class="reference internal" href="#renewal">renewal</a>, <code class="docutils literal"><span class="pre">/etc/letsencrypt/live</span></code> is updated
with the latest necessary files.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><code class="docutils literal"><span class="pre">/etc/letsencrypt/archive</span></code> and <code class="docutils literal"><span class="pre">/etc/letsencrypt/keys</span></code>
contain all previous keys and certificates, while
<code class="docutils literal"><span class="pre">/etc/letsencrypt/live</span></code> symlinks to the latest versions.</p>
</div>
<p>The following files are available:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">privkey.pem</span></code></dt>
<dd><p class="first">Private key for the certificate.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This <strong>must be kept secret at all times</strong>! Never share
it with anyone, including Certbot developers. You cannot
put it into a safe, however - your server still needs to access
this file in order for SSL/TLS to work.</p>
</div>
<p class="last">This is what Apache needs for <a class="reference external" href="https://httpd.apache.org/docs/2.4/mod/mod_ssl.html#sslcertificatekeyfile">SSLCertificateKeyFile</a>,
and Nginx for <a class="reference external" href="http://nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl_certificate_key">ssl_certificate_key</a>.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">fullchain.pem</span></code></dt>
<dd><p class="first">All certificates, <strong>including</strong> server certificate (aka leaf certificate or
end-entity certificate). The server certificate is the first one in this file,
followed by any intermediates.</p>
<p class="last">This is what Apache &gt;= 2.4.8 needs for <a class="reference external" href="https://httpd.apache.org/docs/2.4/mod/mod_ssl.html#sslcertificatefile">SSLCertificateFile</a>,
and what Nginx needs for <a class="reference external" href="http://nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl_certificate">ssl_certificate</a>.</p>
</dd>
<dt><code class="docutils literal"><span class="pre">cert.pem</span></code> and <code class="docutils literal"><span class="pre">chain.pem</span></code> (less common)</dt>
<dd><p class="first"><code class="docutils literal"><span class="pre">cert.pem</span></code> contains the server certificate by itself, and
<code class="docutils literal"><span class="pre">chain.pem</span></code> contains the additional intermediate certificate or
certificates that web browsers will need in order to validate the
server certificate. If you provide one of these files to your web
server, you <strong>must</strong> provide both of them, or some browsers will show
“This Connection is Untrusted” errors for your site, <a class="reference external" href="https://whatsmychaincert.com/">some of the time</a>.</p>
<p>Apache &lt; 2.4.8 needs these for <a class="reference external" href="https://httpd.apache.org/docs/2.4/mod/mod_ssl.html#sslcertificatefile">SSLCertificateFile</a>.
and <a class="reference external" href="https://httpd.apache.org/docs/2.4/mod/mod_ssl.html#sslcertificatechainfile">SSLCertificateChainFile</a>,
respectively.</p>
<p class="last">If you’re using OCSP stapling with Nginx &gt;= 1.3.7, <code class="docutils literal"><span class="pre">chain.pem</span></code> should be
provided as the <a class="reference external" href="http://nginx.org/en/docs/http/ngx_http_ssl_module.html#ssl_trusted_certificate">ssl_trusted_certificate</a>
to validate OCSP responses.</p>
</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All files are PEM-encoded.
If you need other format, such as DER or PFX, then you
could convert using <code class="docutils literal"><span class="pre">openssl</span></code>. You can automate that with
<code class="docutils literal"><span class="pre">--renew-hook</span></code> if you’re using automatic <a class="reference internal" href="#renewal">renewal</a>.</p>
</div>
</div>
<div class="section" id="pre-and-post-validation-hooks">
<span id="hooks"></span><h2><a class="toc-backref" href="#id19">Pre and Post Validation Hooks</a><a class="headerlink" href="#pre-and-post-validation-hooks" title="Permalink to this headline">¶</a></h2>
<p>Certbot allows for the specification of pre and post validation hooks when run
in manual mode. The flags to specify these scripts are <code class="docutils literal"><span class="pre">--manual-auth-hook</span></code>
and <code class="docutils literal"><span class="pre">--manual-cleanup-hook</span></code> respectively and can be used as follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">certbot</span> <span class="n">certonly</span> <span class="o">--</span><span class="n">manual</span> <span class="o">--</span><span class="n">manual</span><span class="o">-</span><span class="n">auth</span><span class="o">-</span><span class="n">hook</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">http</span><span class="o">/</span><span class="n">authenticator</span><span class="o">.</span><span class="n">sh</span> <span class="o">--</span><span class="n">manual</span><span class="o">-</span><span class="n">cleanup</span><span class="o">-</span><span class="n">hook</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">http</span><span class="o">/</span><span class="n">cleanup</span><span class="o">.</span><span class="n">sh</span> <span class="o">-</span><span class="n">d</span> <span class="n">secure</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span>
</pre></div>
</div>
<p>This will run the <code class="docutils literal"><span class="pre">authenticator.sh</span></code> script, attempt the validation, and then run
the <code class="docutils literal"><span class="pre">cleanup.sh</span></code> script. Additionally certbot will pass three environment
variables to these scripts:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">CERTBOT_DOMAIN</span></code>: The domain being authenticated</li>
<li><code class="docutils literal"><span class="pre">CERTBOT_VALIDATION</span></code>: The validation string</li>
<li><code class="docutils literal"><span class="pre">CERTBOT_TOKEN</span></code>: Resource name part of the HTTP-01 challenge (HTTP-01 only)</li>
</ul>
<p>Additionally for cleanup:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">CERTBOT_AUTH_OUTPUT</span></code>: Whatever the auth script wrote to stdout</li>
</ul>
<p>Example usage for HTTP-01:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">certbot</span> <span class="n">certonly</span> <span class="o">--</span><span class="n">manual</span> <span class="o">--</span><span class="n">preferred</span><span class="o">-</span><span class="n">challenges</span><span class="o">=</span><span class="n">http</span> <span class="o">--</span><span class="n">manual</span><span class="o">-</span><span class="n">auth</span><span class="o">-</span><span class="n">hook</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">http</span><span class="o">/</span><span class="n">authenticator</span><span class="o">.</span><span class="n">sh</span> <span class="o">--</span><span class="n">manual</span><span class="o">-</span><span class="n">cleanup</span><span class="o">-</span><span class="n">hook</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">http</span><span class="o">/</span><span class="n">cleanup</span><span class="o">.</span><span class="n">sh</span> <span class="o">-</span><span class="n">d</span> <span class="n">secure</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span>
</pre></div>
</div>
<p>/path/to/http/authenticator.sh</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>#!/bin/bash
echo $CERTBOT_VALIDATION &gt; /var/www/htdocs/.well-known/acme-challenge/$CERTBOT_TOKEN
</pre></div>
</div>
<p>/path/to/http/cleanup.sh</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>#!/bin/bash
rm -f /var/www/htdocs/.well-known/acme-challenge/$CERTBOT_TOKEN
</pre></div>
</div>
<p>Example usage for DNS-01 (Cloudflare API v4) (for example purposes only, do not use as-is)</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">certbot</span> <span class="n">certonly</span> <span class="o">--</span><span class="n">manual</span> <span class="o">--</span><span class="n">preferred</span><span class="o">-</span><span class="n">challenges</span><span class="o">=</span><span class="n">dns</span> <span class="o">--</span><span class="n">manual</span><span class="o">-</span><span class="n">auth</span><span class="o">-</span><span class="n">hook</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">dns</span><span class="o">/</span><span class="n">authenticator</span><span class="o">.</span><span class="n">sh</span> <span class="o">--</span><span class="n">manual</span><span class="o">-</span><span class="n">cleanup</span><span class="o">-</span><span class="n">hook</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">dns</span><span class="o">/</span><span class="n">cleanup</span><span class="o">.</span><span class="n">sh</span> <span class="o">-</span><span class="n">d</span> <span class="n">secure</span><span class="o">.</span><span class="n">example</span><span class="o">.</span><span class="n">com</span>
</pre></div>
</div>
<p>/path/to/dns/authenticator.sh</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>#!/bin/bash

# Get your API key from https://www.cloudflare.com/a/account/my-account
API_KEY="your-api-key"
EMAIL="your.email@example.com"

# Strip only the top domain to get the zone id
DOMAIN=$(expr match "$CERTBOT_DOMAIN" '.*\.\(.*\..*\)')

# Get the Cloudflare zone id
ZONE_EXTRA_PARAMS="status=active&amp;page=1&amp;per_page=20&amp;order=status&amp;direction=desc&amp;match=all"
ZONE_ID=$(curl -s -X GET "https://api.cloudflare.com/client/v4/zones?name=$DOMAIN&amp;$ZONE_EXTRA_PARAMS" \
     -H     "X-Auth-Email: $EMAIL" \
     -H     "X-Auth-Key: $API_KEY" \
     -H     "Content-Type: application/json" | python -c "import sys,json;print(json.load(sys.stdin)['result'][0]['id'])")

# Create TXT record
CREATE_DOMAIN="_acme-challenge.$CERTBOT_DOMAIN"
RECORD_ID=$(curl -s -X POST "https://api.cloudflare.com/client/v4/zones/$ZONE_ID/dns_records" \
     -H     "X-Auth-Email: $EMAIL" \
     -H     "X-Auth-Key: $API_KEY" \
     -H     "Content-Type: application/json" \
     --data '{"type":"TXT","name":"'"$CREATE_DOMAIN"'","content":"'"$CERTBOT_VALIDATION"'","ttl":120}' \
             | python -c "import sys,json;print(json.load(sys.stdin)['result']['id'])")
# Save info for cleanup
if [ ! -d /tmp/CERTBOT_$CERTBOT_DOMAIN ];then
        mkdir -m 0700 /tmp/CERTBOT_$CERTBOT_DOMAIN
fi
echo $ZONE_ID &gt; /tmp/CERTBOT_$CERTBOT_DOMAIN/ZONE_ID
echo $RECORD_ID &gt; /tmp/CERTBOT_$CERTBOT_DOMAIN/RECORD_ID

# Sleep to make sure the change has time to propagate over to DNS
sleep 25
</pre></div>
</div>
<p>/path/to/dns/cleanup.sh</p>
<div class="highlight-none"><div class="highlight"><pre><span></span>#!/bin/bash

# Get your API key from https://www.cloudflare.com/a/account/my-account
API_KEY="your-api-key"
EMAIL="your.email@example.com"

if [ -f /tmp/CERTBOT_$CERTBOT_DOMAIN/ZONE_ID ]; then
        ZONE_ID=$(cat /tmp/CERTBOT_$CERTBOT_DOMAIN/ZONE_ID)
        rm -f /tmp/CERTBOT_$CERTBOT_DOMAIN/ZONE_ID
fi

if [ -f /tmp/CERTBOT_$CERTBOT_DOMAIN/RECORD_ID ]; then
        RECORD_ID=$(cat /tmp/CERTBOT_$CERTBOT_DOMAIN/RECORD_ID)
        rm -f /tmp/CERTBOT_$CERTBOT_DOMAIN/RECORD_ID
fi

# Remove the challenge TXT record from the zone
if [ -n "${ZONE_ID}" ]; then
    if [ -n "${RECORD_ID}" ]; then
        curl -s -X DELETE "https://api.cloudflare.com/client/v4/zones/$ZONE_ID/dns_records/$RECORD_ID" \
                -H "X-Auth-Email: $EMAIL" \
                -H "X-Auth-Key: $API_KEY" \
                -H "Content-Type: application/json"
    fi
fi
</pre></div>
</div>
</div>
<div class="section" id="configuration-file">
<span id="config-file"></span><h2><a class="toc-backref" href="#id20">Configuration file</a><a class="headerlink" href="#configuration-file" title="Permalink to this headline">¶</a></h2>
<p>It is possible to specify configuration file with
<code class="docutils literal"><span class="pre">certbot-auto</span> <span class="pre">--config</span> <span class="pre">cli.ini</span></code> (or shorter <code class="docutils literal"><span class="pre">-c</span> <span class="pre">cli.ini</span></code>). An
example configuration file is shown below:</p>
<div class="code ini highlight-default"><div class="highlight"><pre><span></span><span class="c1"># This is an example of the kind of things you can do in a configuration file.</span>
<span class="c1"># All flags used by the client can be configured here. Run Certbot with</span>
<span class="c1"># "--help" to learn more about the available options.</span>
<span class="c1">#</span>
<span class="c1"># Note that these options apply automatically to all use of Certbot for</span>
<span class="c1"># obtaining or renewing certificates, so options specific to a single</span>
<span class="c1"># certificate on a system with several certificates should not be placed</span>
<span class="c1"># here.</span>

<span class="c1"># Use a 4096 bit RSA key instead of 2048</span>
<span class="n">rsa</span><span class="o">-</span><span class="n">key</span><span class="o">-</span><span class="n">size</span> <span class="o">=</span> <span class="mi">4096</span>

<span class="c1"># Uncomment and update to register with the specified e-mail address</span>
<span class="c1"># email = foo@example.com</span>

<span class="c1"># Uncomment to use the standalone authenticator on port 443</span>
<span class="c1"># authenticator = standalone</span>
<span class="c1"># standalone-supported-challenges = tls-sni-01</span>

<span class="c1"># Uncomment to use the webroot authenticator. Replace webroot-path with the</span>
<span class="c1"># path to the public_html / webroot folder being served by your web server.</span>
<span class="c1"># authenticator = webroot</span>
<span class="c1"># webroot-path = /usr/share/nginx/html</span>
</pre></div>
</div>
<p>By default, the following locations are searched:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">/etc/letsencrypt/cli.ini</span></code></li>
<li><code class="docutils literal"><span class="pre">$XDG_CONFIG_HOME/letsencrypt/cli.ini</span></code> (or
<code class="docutils literal"><span class="pre">~/.config/letsencrypt/cli.ini</span></code> if <code class="docutils literal"><span class="pre">$XDG_CONFIG_HOME</span></code> is not
set).</li>
</ul>
</div>
<div class="section" id="certbot-command-line-options">
<span id="command-line"></span><h2><a class="toc-backref" href="#id21">Certbot command-line options</a><a class="headerlink" href="#certbot-command-line-options" title="Permalink to this headline">¶</a></h2>
<p>Certbot supports a lot of command line options.  Here’s the full list, from
<code class="docutils literal"><span class="pre">certbot</span> <span class="pre">--help</span> <span class="pre">all</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>usage: 
  certbot [SUBCOMMAND] [options] [-d DOMAIN] [-d DOMAIN] ...

Certbot can obtain and install HTTPS/TLS/SSL certificates.  By default,
it will attempt to use a webserver both for obtaining and installing the
cert. The most common SUBCOMMANDS and flags are:

obtain, install, and renew certificates:
    (default) run   Obtain &amp; install a cert in your current webserver
    certonly        Obtain or renew a cert, but do not install it
    renew           Renew all previously obtained certs that are near expiry
   -d DOMAINS       Comma-separated list of domains to obtain a cert for

  --apache          Use the Apache plugin for authentication &amp; installation
  --standalone      Run a standalone webserver for authentication
  --nginx           Use the Nginx plugin for authentication &amp; installation
  --webroot         Place files in a server's webroot folder for authentication
  --manual          Obtain certs interactively, or using shell script hooks

   -n               Run non-interactively
  --test-cert       Obtain a test cert from a staging server
  --dry-run         Test "renew" or "certonly" without saving any certs to disk

manage certificates:
    certificates    Display information about certs you have from Certbot
    revoke          Revoke a certificate (supply --cert-path)
    delete          Delete a certificate

manage your account with Let's Encrypt:
    register        Create a Let's Encrypt ACME account
  --agree-tos       Agree to the ACME server's Subscriber Agreement
   -m EMAIL         Email address for important account notifications

optional arguments:
  -h, --help            show this help message and exit
  -c CONFIG_FILE, --config CONFIG_FILE
                        path to config file (default: /etc/letsencrypt/cli.ini
                        and ~/.config/letsencrypt/cli.ini)
  -v, --verbose         This flag can be used multiple times to incrementally
                        increase the verbosity of output, e.g. -vvv. (default:
                        -2)
  -n, --non-interactive, --noninteractive
                        Run without ever asking for user input. This may
                        require additional command line flags; the client will
                        try to explain which ones are required if it finds one
                        missing (default: False)
  --force-interactive   Force Certbot to be interactive even if it detects
                        it's not being run in a terminal. This flag cannot be
                        used with the renew subcommand. (default: False)
  -d DOMAIN, --domains DOMAIN, --domain DOMAIN
                        Domain names to apply. For multiple domains you can
                        use multiple -d flags or enter a comma separated list
                        of domains as a parameter. (default: Ask)
  --cert-name CERTNAME  Certificate name to apply. Only one certificate name
                        can be used per Certbot run. To see certificate names,
                        run 'certbot certificates'. When creating a new
                        certificate, specifies the new certificate's name.
                        (default: None)
  --dry-run             Perform a test run of the client, obtaining test
                        (invalid) certs but not saving them to disk. This can
                        currently only be used with the 'certonly' and 'renew'
                        subcommands. Note: Although --dry-run tries to avoid
                        making any persistent changes on a system, it is not
                        completely side-effect free: if used with webserver
                        authenticator plugins like apache and nginx, it makes
                        and then reverts temporary config changes in order to
                        obtain test certs, and reloads webservers to deploy
                        and then roll back those changes. It also calls --pre-
                        hook and --post-hook commands if they are defined
                        because they may be necessary to accurately simulate
                        renewal. --renew-hook commands are not called.
                        (default: False)
  --debug-challenges    After setting up challenges, wait for user input
                        before submitting to CA (default: False)
  --preferred-challenges PREF_CHALLS
                        A sorted, comma delimited list of the preferred
                        challenge to use during authorization with the most
                        preferred challenge listed first (Eg, "dns" or "tls-
                        sni-01,http,dns"). Not all plugins support all
                        challenges. See
                        https://certbot.eff.org/docs/using.html#plugins for
                        details. ACME Challenges are versioned, but if you
                        pick "http" rather than "http-01", Certbot will select
                        the latest version automatically. (default: [])
  --user-agent USER_AGENT
                        Set a custom user agent string for the client. User
                        agent strings allow the CA to collect high level
                        statistics about success rates by OS, plugin and use
                        case, and to know when to deprecate support for past
                        Python versions and flags. If you wish to hide this
                        information from the Let's Encrypt server, set this to
                        "". (default: CertbotACMEClient/0.14.1 (certbot;
                        Ubuntu 16.04.2 LTS) Authenticator/XXX Installer/YYY
                        (SUBCOMMAND; flags: FLAGS) Py/2.7.12). The flags
                        encoded in the user agent are: --duplicate, --force-
                        renew, --allow-subset-of-names, -n, and whether any
                        hooks are set.

automation:
  Arguments for automating execution &amp; other tweaks

  --keep-until-expiring, --keep, --reinstall
                        If the requested cert matches an existing cert, always
                        keep the existing one until it is due for renewal (for
                        the 'run' subcommand this means reinstall the existing
                        cert). (default: Ask)
  --expand              If an existing cert is a strict subset of the
                        requested names, always expand and replace it with the
                        additional names. (default: Ask)
  --version             show program's version number and exit
  --force-renewal, --renew-by-default
                        If a certificate already exists for the requested
                        domains, renew it now, regardless of whether it is
                        near expiry. (Often --keep-until-expiring is more
                        appropriate). Also implies --expand. (default: False)
  --renew-with-new-domains
                        If a certificate already exists for the requested
                        certificate name but does not match the requested
                        domains, renew it now, regardless of whether it is
                        near expiry. (default: False)
  --allow-subset-of-names
                        When performing domain validation, do not consider it
                        a failure if authorizations can not be obtained for a
                        strict subset of the requested domains. This may be
                        useful for allowing renewals for multiple domains to
                        succeed even if some domains no longer point at this
                        system. This option cannot be used with --csr.
                        (default: False)
  --agree-tos           Agree to the ACME Subscriber Agreement (default: Ask)
  --duplicate           Allow making a certificate lineage that duplicates an
                        existing one (both can be renewed in parallel)
                        (default: False)
  --os-packages-only    (certbot-auto only) install OS package dependencies
                        and then stop (default: False)
  --no-self-upgrade     (certbot-auto only) prevent the certbot-auto script
                        from upgrading itself to newer released versions
                        (default: Upgrade automatically)
  --no-bootstrap        (certbot-auto only) prevent the certbot-auto script
                        from installing OS-level dependencies (default: Prompt
                        to install OS-wide dependencies, but exit if the user
                        says 'No')
  -q, --quiet           Silence all output except errors. Useful for
                        automation via cron. Implies --non-interactive.
                        (default: False)

security:
  Security parameters &amp; server settings

  --rsa-key-size N      Size of the RSA key. (default: 2048)
  --must-staple         Adds the OCSP Must Staple extension to the
                        certificate. Autoconfigures OCSP Stapling for
                        supported setups (Apache version &gt;= 2.3.3 ). (default:
                        False)
  --redirect            Automatically redirect all HTTP traffic to HTTPS for
                        the newly authenticated vhost. (default: Ask)
  --no-redirect         Do not automatically redirect all HTTP traffic to
                        HTTPS for the newly authenticated vhost. (default:
                        Ask)
  --hsts                Add the Strict-Transport-Security header to every HTTP
                        response. Forcing browser to always use SSL for the
                        domain. Defends against SSL Stripping. (default:
                        False)
  --uir                 Add the "Content-Security-Policy: upgrade-insecure-
                        requests" header to every HTTP response. Forcing the
                        browser to use https:// for every http:// resource.
                        (default: None)
  --staple-ocsp         Enables OCSP Stapling. A valid OCSP response is
                        stapled to the certificate that the server offers
                        during TLS. (default: None)
  --strict-permissions  Require that all configuration files are owned by the
                        current user; only needed if your config is somewhere
                        unsafe like /tmp/ (default: False)

testing:
  The following flags are meant for testing and integration purposes only.

  --test-cert, --staging
                        Use the staging server to obtain or revoke test
                        (invalid) certs; equivalent to --server https://acme-
                        staging.api.letsencrypt.org/directory (default: False)
  --debug               Show tracebacks in case of errors, and allow certbot-
                        auto execution on experimental platforms (default:
                        False)
  --no-verify-ssl       Disable verification of the ACME server's certificate.
                        (default: False)
  --tls-sni-01-port TLS_SNI_01_PORT
                        Port used during tls-sni-01 challenge. This only
                        affects the port Certbot listens on. A conforming ACME
                        server will still attempt to connect on port 443.
                        (default: 443)
  --http-01-port HTTP01_PORT
                        Port used in the http-01 challenge. This only affects
                        the port Certbot listens on. A conforming ACME server
                        will still attempt to connect on port 80. (default:
                        80)
  --break-my-certs      Be willing to replace or renew valid certs with
                        invalid (testing/staging) certs (default: False)

paths:
  Arguments changing execution paths &amp; servers

  --cert-path CERT_PATH
                        Path to where cert is saved (with auth --csr),
                        installed from, or revoked. (default: None)
  --key-path KEY_PATH   Path to private key for cert installation or
                        revocation (if account key is missing) (default: None)
  --fullchain-path FULLCHAIN_PATH
                        Accompanying path to a full certificate chain (cert
                        plus chain). (default: None)
  --chain-path CHAIN_PATH
                        Accompanying path to a certificate chain. (default:
                        None)
  --config-dir CONFIG_DIR
                        Configuration directory. (default: /etc/letsencrypt)
  --work-dir WORK_DIR   Working directory. (default: /var/lib/letsencrypt)
  --logs-dir LOGS_DIR   Logs directory. (default: /var/log/letsencrypt)
  --server SERVER       ACME Directory Resource URI. (default:
                        https://acme-v01.api.letsencrypt.org/directory)

manage:
  Various subcommands and flags are available for managing your
  certificates:

  certificates          List certificates managed by Certbot
  delete                Clean up all files related to a certificate
  renew                 Renew all certificates (or one specified with --cert-
                        name)
  revoke                Revoke a certificate specified with --cert-path
  update_symlinks       Recreate symlinks in your /etc/letsencrypt/live/
                        directory

run:
  Options for obtaining &amp; installing certs

certonly:
  Options for modifying how a cert is obtained

  --csr CSR             Path to a Certificate Signing Request (CSR) in DER or
                        PEM format. Currently --csr only works with the
                        'certonly' subcommand. (default: None)

renew:
  The 'renew' subcommand will attempt to renew all certificates (or more
  precisely, certificate lineages) you have previously obtained if they are
  close to expiry, and print a summary of the results. By default, 'renew'
  will reuse the options used to create obtain or most recently successfully
  renew each certificate lineage. You can try it with `--dry-run` first. For
  more fine-grained control, you can renew individual lineages with the
  `certonly` subcommand. Hooks are available to run commands before and
  after renewal; see https://certbot.eff.org/docs/using.html#renewal for
  more information on these.

  --pre-hook PRE_HOOK   Command to be run in a shell before obtaining any
                        certificates. Intended primarily for renewal, where it
                        can be used to temporarily shut down a webserver that
                        might conflict with the standalone plugin. This will
                        only be called if a certificate is actually to be
                        obtained/renewed. When renewing several certificates
                        that have identical pre-hooks, only the first will be
                        executed. (default: None)
  --post-hook POST_HOOK
                        Command to be run in a shell after attempting to
                        obtain/renew certificates. Can be used to deploy
                        renewed certificates, or to restart any servers that
                        were stopped by --pre-hook. This is only run if an
                        attempt was made to obtain/renew a certificate. If
                        multiple renewed certificates have identical post-
                        hooks, only one will be run. (default: None)
  --renew-hook RENEW_HOOK
                        Command to be run in a shell once for each
                        successfully renewed certificate. For this command,
                        the shell variable $RENEWED_LINEAGE will point to the
                        config live subdirectory (for example,
                        "/etc/letsencrypt/live/example.com") containing the
                        new certs and keys; the shell variable
                        $RENEWED_DOMAINS will contain a space-delimited list
                        of renewed cert domains (for example, "example.com
                        www.example.com" (default: None)
  --disable-hook-validation
                        Ordinarily the commands specified for --pre-hook
                        /--post-hook/--renew-hook will be checked for
                        validity, to see if the programs being run are in the
                        $PATH, so that mistakes can be caught early, even when
                        the hooks aren't being run just yet. The validation is
                        rather simplistic and fails if you use more advanced
                        shell constructs, so you can use this switch to
                        disable it. (default: False)

certificates:
  List certificates managed by Certbot

delete:
  Options for deleting a certificate

revoke:
  Options for revocation of certs

  --reason {keycompromise,affiliationchanged,superseded,unspecified,cessationofoperation}
                        Specify reason for revoking certificate. (default: 0)

register:
  Options for account registration &amp; modification

  --register-unsafely-without-email
                        Specifying this flag enables registering an account
                        with no email address. This is strongly discouraged,
                        because in the event of key loss or account compromise
                        you will irrevocably lose access to your account. You
                        will also be unable to receive notice about impending
                        expiration or revocation of your certificates. Updates
                        to the Subscriber Agreement will still affect you, and
                        will be effective 14 days after posting an update to
                        the web site. (default: False)
  --update-registration
                        With the register verb, indicates that details
                        associated with an existing registration, such as the
                        e-mail address, should be updated, rather than
                        registering a new account. (default: False)
  -m EMAIL, --email EMAIL
                        Email used for registration and recovery contact.
                        (default: Ask)
  --eff-email           Share your e-mail address with EFF (default: None)
  --no-eff-email        Don't share your e-mail address with EFF (default:
                        None)

unregister:
  Options for account deactivation.

  --account ACCOUNT_ID  Account ID to use (default: None)

install:
  Options for modifying how a cert is deployed

config_changes:
  Options for controlling which changes are displayed

  --num NUM             How many past revisions you want to be displayed
                        (default: None)

rollback:
  Options for rolling back server configuration changes

  --checkpoints N       Revert configuration N number of checkpoints.
                        (default: 1)

plugins:
  Options for for the "plugins" subcommand

  --init                Initialize plugins. (default: False)
  --prepare             Initialize and prepare plugins. (default: False)
  --authenticators      Limit to authenticator plugins only. (default: None)
  --installers          Limit to installer plugins only. (default: None)

update_symlinks:
  Recreates cert and key symlinks in /etc/letsencrypt/live, if you changed
  them by hand or edited a renewal configuration file

plugins:
  Plugin Selection: Certbot client supports an extensible plugins
  architecture. See 'certbot plugins' for a list of all installed plugins
  and their names. You can force a particular plugin by setting options
  provided below. Running --help &lt;plugin_name&gt; will list flags specific to
  that plugin.

  --configurator CONFIGURATOR
                        Name of the plugin that is both an authenticator and
                        an installer. Should not be used together with
                        --authenticator or --installer. (default: Ask)
  -a AUTHENTICATOR, --authenticator AUTHENTICATOR
                        Authenticator plugin name. (default: None)
  -i INSTALLER, --installer INSTALLER
                        Installer plugin name (also used to find domains).
                        (default: None)
  --apache              Obtain and install certs using Apache (default: False)
  --nginx               Obtain and install certs using Nginx (default: False)
  --standalone          Obtain certs using a "standalone" webserver. (default:
                        False)
  --manual              Provide laborious manual instructions for obtaining a
                        cert (default: False)
  --webroot             Obtain certs by placing files in a webroot directory.
                        (default: False)

apache:
  Apache Web Server plugin - Beta

  --apache-enmod APACHE_ENMOD
                        Path to the Apache 'a2enmod' binary. (default:
                        a2enmod)
  --apache-dismod APACHE_DISMOD
                        Path to the Apache 'a2dismod' binary. (default:
                        a2dismod)
  --apache-le-vhost-ext APACHE_LE_VHOST_EXT
                        SSL vhost configuration extension. (default: -le-
                        ssl.conf)
  --apache-server-root APACHE_SERVER_ROOT
                        Apache server root directory. (default: /etc/apache2)
  --apache-vhost-root APACHE_VHOST_ROOT
                        Apache server VirtualHost configuration root (default:
                        /etc/apache2/sites-available)
  --apache-logs-root APACHE_LOGS_ROOT
                        Apache server logs directory (default:
                        /var/log/apache2)
  --apache-challenge-location APACHE_CHALLENGE_LOCATION
                        Directory path for challenge configuration. (default:
                        /etc/apache2)
  --apache-handle-modules APACHE_HANDLE_MODULES
                        Let installer handle enabling required modules for
                        you.(Only Ubuntu/Debian currently) (default: True)
  --apache-handle-sites APACHE_HANDLE_SITES
                        Let installer handle enabling sites for you.(Only
                        Ubuntu/Debian currently) (default: True)

manual:
  Authenticate through manual configuration or custom shell scripts. When
  using shell scripts, an authenticator script must be provided. The
  environment variables available to this script are $CERTBOT_DOMAIN which
  contains the domain being authenticated, $CERTBOT_VALIDATION which is the
  validation string, and $CERTBOT_TOKEN which is the filename of the
  resource requested when performing an HTTP-01 challenge. An additional
  cleanup script can also be provided and can use the additional variable
  $CERTBOT_AUTH_OUTPUT which contains the stdout output from the auth
  script.

  --manual-auth-hook MANUAL_AUTH_HOOK
                        Path or command to execute for the authentication
                        script (default: None)
  --manual-cleanup-hook MANUAL_CLEANUP_HOOK
                        Path or command to execute for the cleanup script
                        (default: None)
  --manual-public-ip-logging-ok
                        Automatically allows public IP logging (default: Ask)

nginx:
  Nginx Web Server plugin - Alpha

  --nginx-server-root NGINX_SERVER_ROOT
                        Nginx server root directory. (default: /etc/nginx)
  --nginx-ctl NGINX_CTL
                        Path to the 'nginx' binary, used for 'configtest' and
                        retrieving nginx version number. (default: nginx)

null:
  Null Installer

standalone:
  Spin up a temporary webserver

webroot:
  Place files in webroot directory

  --webroot-path WEBROOT_PATH, -w WEBROOT_PATH
                        public_html / webroot path. This can be specified
                        multiple times to handle different domains; each
                        domain will have the webroot path that preceded it.
                        For instance: `-w /var/www/example -d example.com -d
                        www.example.com -w /var/www/thing -d thing.net -d
                        m.thing.net` (default: Ask)
  --webroot-map WEBROOT_MAP
                        JSON dictionary mapping domains to webroot paths; this
                        implies -d for each entry. You may need to escape this
                        from your shell. E.g.: --webroot-map
                        '{"eg1.is,m.eg1.is":"/www/eg1/", "eg2.is":"/www/eg2"}'
                        This option is merged with, but takes precedence over,
                        -w / -d entries. At present, if you put webroot-map in
                        a config file, it needs to be on a single line, like:
                        webroot-map = {"example.com":"/var/www"}. (default:
                        {})
</pre></div>
</div>
</div>
<div class="section" id="getting-help">
<h2><a class="toc-backref" href="#id22">Getting help</a><a class="headerlink" href="#getting-help" title="Permalink to this headline">¶</a></h2>
<p>If you’re having problems, we recommend posting on the Let’s Encrypt
<a class="reference external" href="https://community.letsencrypt.org/">Community Forum</a>.</p>
<p>You can also chat with us on IRC: <a class="reference external" href="https://webchat.oftc.net/?channels=%23certbot">(#certbot @
OFTC)</a> or
<a class="reference external" href="https://webchat.freenode.net/?channels=%23letsencrypt">(#letsencrypt @ freenode)</a>.</p>
<p>If you find a bug in the software, please do report it in our <a class="reference external" href="https://github.com/certbot/certbot/issues">issue
tracker</a>. Remember to
give us as much information as possible:</p>
<ul class="simple">
<li>copy and paste exact command line used and the output (though mind
that the latter might include some personally identifiable
information, including your email and domains)</li>
<li>copy and paste logs from <code class="docutils literal"><span class="pre">/var/log/letsencrypt</span></code> (though mind they
also might contain personally identifiable information)</li>
<li>copy and paste <code class="docutils literal"><span class="pre">certbot</span> <span class="pre">--version</span></code> output</li>
<li>your operating system, including specific version</li>
<li>specify which installation method you’ve chosen</li>
</ul>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="https://certbot.eff.org/docs/contributing.html" class="btn btn-neutral float-right" title="Developer Guide" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="https://certbot.eff.org/docs/install.html" class="btn btn-neutral" title="Get Certbot" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr>

  <div role="contentinfo">
    <p>
        © Copyright 2014-2016 - The Certbot software and documentation 
are licensed under the Apache 2.0 license as described at 
https://eff.org/cb-license .

    </p>
  </div>
  <!-- Built with Sphinx using a custom theme. --> 

</footer>

        </div>
      </div>

    </section>

  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Other Versions</span>
      v: 
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Downloads</dt>
        <dd><a href="https://certbot.eff.org/docs/certbot.pdf">PDF</a></dd>
        <dd><a href="https://certbot.eff.org/docs/certbot.zip">HTML</a></dd>
        <dd><a href="https://certbot.eff.org/docs/certbot.epub">Epub</a></dd>
      </dl>
      <hr>

    </div>
  </div>


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.15.0.dev0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="2.userguide_files/jquery.js"></script>
      <script type="text/javascript" src="2.userguide_files/underscore.js"></script>
      <script type="text/javascript" src="2.userguide_files/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="2.userguide_files/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

<noscript><img src="https://anon-stats.eff.org/piwik.php?idsite=24&amp;rec=1&amp;action_name=User%20Guide%E2%80%94%20Certbot%200.15.0.dev0%20documentation" style="border:0" height="0" width="0" alt="" /></noscript>
<div style="height: 0; width: 0; position: absolute" id="anon-stats"><img src="2.userguide_files/piwik.gif" style="border:0" alt="" width="0" height="0"></div>
<script type="text/javascript">
document.getElementById('anon-stats').innerHTML = '<img src="https://anon-stats.eff.org/piwik.php?idsite=24&amp;rec=1&amp;urlref=' + encodeURIComponent(document.referrer) + '&amp;action_name=' + encodeURIComponent(document.title) + '" style="border:0" height="0" width="0" alt="" />';
</script>

</body></html>